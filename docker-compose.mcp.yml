# Docker Compose for DAST MCP Server
#
# Usage:
#   docker-compose -f docker-compose.mcp.yml up -d
#
# Then add to your Claude Desktop config:
# {
#   "mcpServers": {
#     "dast-crawler": {
#       "command": "docker",
#       "args": [
#         "exec", "-i", "dast-mcp-server",
#         "python", "-m", "dast.mcp_server"
#       ]
#     }
#   }
# }

version: '3.8'

services:
  dast-mcp-server:
    build:
      context: .
      dockerfile: Dockerfile.mcp
    container_name: dast-mcp-server
    restart: unless-stopped
    volumes:
      # Mount storage directory for persistent crawler data
      - ./storage:/app/storage
      # Mount reports directory
      - ./reports:/app/reports
    environment:
      - PYTHONUNBUFFERED=1
    # Keep container running for MCP stdio communication
    stdin_open: true
    tty: true
